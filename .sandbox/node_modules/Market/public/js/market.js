require('angular');
require('angular-route');

var Market = angular.module('Market', ['ngRoute', 'AppsModule']);

Market.config(['$routeProvider',
  function($routeProvider) {
    $routeProvider.
    when('/', {
      templateUrl: 'views/apps/index.html',
      controller: 'AppsIndexCtrl'
    }).
    when('/people', {
      templateUrl: 'views/users/index.html',
      controller: 'UsersIndexCtrl'
    }).
    when('/apps/:name', {
      templateUrl: 'views/apps/show.html',
      controller: 'AppsShowCtrl'
    }).
    otherwise({
      redirectTo: '/'
    });
  }]);

Market.config( [
  '$compileProvider',
  function( $compileProvider )
  {   
    $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/);
        // Angular before v1.2 uses $compileProvider.urlSanitizationWhitelist(...)
      }
      ]);

Market.directive('nbNavbar', function() {
  return {
    restrict: 'E',
    controller: function($scope, $location) {
      //$.material.init();
      $scope.search = {};
      $scope.search.text = '';
      $scope.search.go = function () {
        $location.path("/");
      };
    },
    templateUrl: './nav.html'
  };
});

Market.directive('nbFooter', function() {
  return {
    restrict: 'E',
    controller: function() {
      //$.material.init();
    },
    templateUrl: './footer.html'
  };
});

require('./controllers/apps');

module.exports = Market;
